import {
  InputSelectionUI
} from "./chunk-HVWQRD2H.js";
import {
  Flex,
  PaperWallet,
  Spinner,
  useConnect
} from "./chunk-RYHC6EEQ.js";
import {
  require_jsx_runtime
} from "./chunk-JA35CLVH.js";
import {
  require_react
} from "./chunk-VAZDPHGE.js";
import {
  init_shim
} from "./chunk-TAEM2Y7A.js";
import {
  __toESM
} from "./chunk-IKJM6GHQ.js";

// node_modules/@thirdweb-dev/react/dist/paperWallet-2dfb634f.browser.esm.js
init_shim();
var import_react = __toESM(require_react());
var import_jsx_runtime = __toESM(require_jsx_runtime());
var paperWallet = (config) => {
  return {
    id: PaperWallet.id,
    meta: PaperWallet.meta,
    create(options) {
      return new PaperWallet({
        ...options,
        ...config
      });
    },
    selectUI: PaperSelectionUI,
    connectUI: PaperConnectionUI
  };
};
var PaperSelectionUI = (props) => {
  return (0, import_jsx_runtime.jsx)(InputSelectionUI, {
    onSelect: props.onSelect,
    placeholder: "Enter your email address",
    name: "email",
    type: "email",
    errorMessage: (_input) => {
      const input = _input.replace(/\+/g, "");
      const emailRegex = /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,})$/g;
      const isValidEmail = emailRegex.test(input);
      if (!isValidEmail) {
        return "Invalid email address";
      }
    },
    emptyErrorMessage: "email address is required",
    supportedWallets: props.supportedWallets
  });
};
var PaperConnectionUI = (_ref) => {
  let {
    close,
    walletConfig,
    open,
    selectionData,
    supportedWallets
  } = _ref;
  const connectPrompted = (0, import_react.useRef)(false);
  const connect = useConnect();
  const singleWallet = supportedWallets.length === 1;
  (0, import_react.useEffect)(() => {
    if (connectPrompted.current) {
      return;
    }
    connectPrompted.current = true;
    (async () => {
      close();
      try {
        await connect(walletConfig, {
          email: selectionData
        });
      } catch (e) {
        if (!singleWallet) {
          open();
        }
        console.error(e);
      }
    })();
  }, [connect, walletConfig, close, open, singleWallet, selectionData]);
  return (0, import_jsx_runtime.jsx)(Flex, {
    justifyContent: "center",
    alignItems: "center",
    style: {
      minHeight: "250px"
    },
    children: (0, import_jsx_runtime.jsx)(Spinner, {
      size: "md",
      color: "primary"
    })
  });
};

export {
  paperWallet
};
//# sourceMappingURL=chunk-ZXJFNGS5.js.map
